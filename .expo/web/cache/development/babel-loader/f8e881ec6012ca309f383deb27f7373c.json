{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useWalletConnect } from \"@walletconnect/react-native-dapp\";\nimport React from \"react\";\nimport localhost from \"react-native-localhost\";\nimport Web3 from \"web3\";\nimport { DetailsPizza, Login, DetailsDesserts, DetailsDrinks, Live2D, History, RaceDetail } from \"./screens\";\nimport Home from \"./screens/home/Home\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport { NavigationContainer, DefaultTheme } from \"@react-navigation/native\";\nimport SplashScreen from \"react-native-splash-screen\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nvar Stack = createStackNavigator();\nimport PizzaShop from \"../artifacts/contracts/PizzaShop.sol/PizzaShop.json\";\nimport { COLORS } from \"../constants\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar shouldDeployContract = function shouldDeployContract(web3, abi, data, from) {\n  var deployment, gas, _await$deployment$sen, contractAddress;\n  return _regeneratorRuntime.async(function shouldDeployContract$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          deployment = new web3.eth.Contract(abi).deploy({\n            data: data\n          });\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(deployment.estimateGas());\n        case 3:\n          gas = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(deployment.send({\n            from: from,\n            gas: gas\n          }));\n        case 6:\n          _await$deployment$sen = _context.sent;\n          contractAddress = _await$deployment$sen.options.address;\n          return _context.abrupt(\"return\", new web3.eth.Contract(abi, contractAddress));\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport default function App() {\n  React.useEffect(function () {\n    SplashScreen.hide();\n  });\n  var connector = useWalletConnect();\n  var _React$useState = React.useState(\"Loading...\"),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    message = _React$useState2[0],\n    setMessage = _React$useState2[1];\n  var web3 = React.useMemo(function () {\n    return new Web3(new Web3.providers.HttpProvider(\"http://\" + localhost + \":\" + undefined));\n  }, [undefined]);\n  React.useEffect(function () {\n    void function _callee() {\n      var _await$web3$eth$accou, address, contract;\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(web3.eth.accounts.privateKeyToAccount(undefined));\n            case 2:\n              _await$web3$eth$accou = _context2.sent;\n              address = _await$web3$eth$accou.address;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(shouldDeployContract(web3, PizzaShop.abi, PizzaShop.bytecode, address));\n            case 6:\n              contract = _context2.sent;\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }();\n  }, [web3, shouldDeployContract, setMessage, undefined]);\n  var connectWallet = React.useCallback(function () {\n    return connector.connect();\n  }, [connector]);\n  var signTransaction = React.useCallback(function _callee2() {\n    return _regeneratorRuntime.async(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(connector.signTransaction({\n              data: \"0x\",\n              from: \"0xbc28Ea04101F03aA7a94C1379bc3AB32E65e62d3\",\n              gas: \"0x9c40\",\n              gasPrice: \"0x02540be400\",\n              nonce: \"0x0114\",\n              to: \"0x89D24A7b4cCB1b6fAA2625Fe562bDd9A23260359\",\n              value: \"0x00\"\n            }));\n          case 3:\n            _context3.next = 8;\n            break;\n          case 5:\n            _context3.prev = 5;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.error(_context3.t0);\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  }, [connector]);\n  var killSession = React.useCallback(function () {\n    return connector.killSession();\n  }, [connector]);\n  var MyTheme = _objectSpread(_objectSpread({}, DefaultTheme), {}, {\n    colors: _objectSpread(_objectSpread({}, DefaultTheme.colors), {}, {\n      card: \"rgb(53, 60, 62)\",\n      background: COLORS.transparentBlur\n    })\n  });\n  return _jsx(GestureHandlerRootView, {\n    style: {\n      flex: 1\n    },\n    children: _jsx(NavigationContainer, {\n      theme: MyTheme,\n      children: _jsxs(Stack.Navigator, {\n        screenOptions: {\n          headerShown: false\n        },\n        initialRouteName: \"Login\",\n        children: [_jsx(Stack.Screen, {\n          name: \"Login\",\n          component: Login\n        }), _jsx(Stack.Screen, {\n          name: \"Home\",\n          component: Home,\n          options: {\n            headerTitle: function headerTitle(props) {\n              return _jsx(Header, {});\n            }\n          }\n        }), _jsx(Stack.Screen, {\n          name: \"Live2D\",\n          component: Live2D\n        }), _jsx(Stack.Screen, {\n          name: \"History\",\n          component: History\n        }), _jsx(Stack.Screen, {\n          name: \"RaceDetail\",\n          component: RaceDetail\n        }), _jsx(Stack.Screen, {\n          name: \"DetailsPizza\",\n          component: DetailsPizza\n        }), _jsx(Stack.Screen, {\n          name: \"DetailsDesserts\",\n          component: DetailsDesserts\n        }), _jsx(Stack.Screen, {\n          name: \"DetailsDrinks\",\n          component: DetailsDrinks\n        })]\n      })\n    })\n  });\n}","map":{"version":3,"names":["useWalletConnect","React","localhost","Web3","DetailsPizza","Login","DetailsDesserts","DetailsDrinks","Live2D","History","RaceDetail","Home","createStackNavigator","NavigationContainer","DefaultTheme","SplashScreen","GestureHandlerRootView","Stack","PizzaShop","COLORS","shouldDeployContract","web3","abi","data","from","deployment","eth","Contract","deploy","estimateGas","gas","send","contractAddress","options","address","App","useEffect","hide","connector","useState","message","setMessage","useMemo","providers","HttpProvider","accounts","privateKeyToAccount","bytecode","contract","connectWallet","useCallback","connect","signTransaction","gasPrice","nonce","to","value","console","error","killSession","MyTheme","colors","card","background","transparentBlur","flex","headerShown","headerTitle","props"],"sources":["D:/Horse-racing/frontend/App.tsx"],"sourcesContent":["import { HARDHAT_PORT, HARDHAT_PRIVATE_KEY } from \"@env\";\r\nimport { useWalletConnect } from \"@walletconnect/react-native-dapp\";\r\nimport React from \"react\";\r\nimport { StyleSheet, Text, TouchableOpacity, View } from \"react-native\";\r\nimport localhost from \"react-native-localhost\";\r\nimport Web3 from \"web3\";\r\nimport {\r\n  DetailsPizza,\r\n  Login,\r\n  DetailsDesserts,\r\n  DetailsDrinks,\r\n  Live2D,\r\n  History,\r\n  RaceDetail,\r\n} from \"./screens\";\r\nimport Home from \"./screens/home/Home\";\r\nimport { createStackNavigator } from \"@react-navigation/stack\";\r\nimport {\r\n  NavigationContainer,\r\n  getFocusedRouteNameFromRoute,\r\n  DefaultTheme,\r\n} from \"@react-navigation/native\";\r\nimport SplashScreen from \"react-native-splash-screen\";\r\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\r\n\r\nimport Tabs from \"../navigation/tabs.js\";\r\n\r\nconst Stack = createStackNavigator();\r\nimport PizzaShop from \"../artifacts/contracts/PizzaShop.sol/PizzaShop.json\";\r\nimport { COLORS } from \"../constants\";\r\n\r\nconst shouldDeployContract = async (web3, abi, data, from: string) => {\r\n  const deployment = new web3.eth.Contract(abi).deploy({ data });\r\n  const gas = await deployment.estimateGas();\r\n  const {\r\n    options: { address: contractAddress },\r\n  } = await deployment.send({ from, gas });\r\n  return new web3.eth.Contract(abi, contractAddress);\r\n};\r\n\r\nexport default function App(): JSX.Element {\r\n  React.useEffect(() => {\r\n    SplashScreen.hide();\r\n  });\r\n\r\n  const connector = useWalletConnect();\r\n  const [message, setMessage] = React.useState<string>(\"Loading...\");\r\n  const web3 = React.useMemo(\r\n    () =>\r\n      new Web3(\r\n        new Web3.providers.HttpProvider(`http://${localhost}:${HARDHAT_PORT}`)\r\n      ),\r\n    [HARDHAT_PORT]\r\n  );\r\n  React.useEffect(() => {\r\n    void (async () => {\r\n      const { address } = await web3.eth.accounts.privateKeyToAccount(\r\n        HARDHAT_PRIVATE_KEY\r\n      );\r\n      const contract = await shouldDeployContract(\r\n        web3,\r\n        PizzaShop.abi,\r\n        PizzaShop.bytecode,\r\n        address\r\n      );\r\n    })();\r\n  }, [web3, shouldDeployContract, setMessage, HARDHAT_PRIVATE_KEY]);\r\n  const connectWallet = React.useCallback(() => {\r\n    return connector.connect();\r\n  }, [connector]);\r\n  const signTransaction = React.useCallback(async () => {\r\n    try {\r\n      await connector.signTransaction({\r\n        data: \"0x\",\r\n        from: \"0xbc28Ea04101F03aA7a94C1379bc3AB32E65e62d3\",\r\n        gas: \"0x9c40\",\r\n        gasPrice: \"0x02540be400\",\r\n        nonce: \"0x0114\",\r\n        to: \"0x89D24A7b4cCB1b6fAA2625Fe562bDd9A23260359\",\r\n        value: \"0x00\",\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }, [connector]);\r\n  const killSession = React.useCallback(() => {\r\n    return connector.killSession();\r\n  }, [connector]);\r\n\r\n  const MyTheme = {\r\n    ...DefaultTheme,\r\n    colors: {\r\n      ...DefaultTheme.colors,\r\n      card: \"rgb(53, 60, 62)\",\r\n      background: COLORS.transparentBlur,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <GestureHandlerRootView style={{ flex: 1 }}>\r\n      <NavigationContainer theme={MyTheme}>\r\n        <Stack.Navigator\r\n          screenOptions={{\r\n            headerShown: false,\r\n          }}\r\n          initialRouteName={\"Login\"}\r\n        >\r\n          <Stack.Screen name=\"Login\" component={Login} />\r\n          <Stack.Screen\r\n            name=\"Home\"\r\n            component={Home}\r\n            options={{\r\n              headerTitle: (props) => <Header />\r\n            }}\r\n          />\r\n          {/* <Stack.Screen name=\"Order\" component={Tabs} />\r\n          <Stack.Screen name=\"Wallet\" component={Tabs} /> */}\r\n          <Stack.Screen name=\"Live2D\" component={Live2D} />\r\n          <Stack.Screen name=\"History\" component={History} />\r\n          <Stack.Screen name=\"RaceDetail\" component={RaceDetail} />\r\n\r\n          <Stack.Screen name=\"DetailsPizza\" component={DetailsPizza} />\r\n          <Stack.Screen name=\"DetailsDesserts\" component={DetailsDesserts} />\r\n          <Stack.Screen name=\"DetailsDrinks\" component={DetailsDrinks} />\r\n        </Stack.Navigator>\r\n      </NavigationContainer>\r\n    </GestureHandlerRootView>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}