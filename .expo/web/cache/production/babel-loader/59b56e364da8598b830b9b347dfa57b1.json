{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _excluded=[\"placement\",\"title\",\"render\",\"id\",\"description\",\"duration\",\"_title\",\"_description\",\"accessibilityAnnouncement\",\"avoidKeyboard\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import{Overlay}from\"../../primitives/Overlay\";import{PresenceTransition}from\"../Transitions\";import VStack from\"../../primitives/Stack/VStack\";import React,{createContext,useState,useMemo}from'react';import AccessibilityInfo from\"react-native-web/dist/exports/AccessibilityInfo\";import Platform from\"react-native-web/dist/exports/Platform\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import Box from\"../../primitives/Box\";import{usePropsResolution}from\"../../../hooks\";import{useKeyboardBottomInset}from\"../../../utils\";var INSET=50;var POSITIONS={'top':{top:INSET,left:0,right:0},'top-right':{top:INSET,right:0},'top-left':{top:INSET,left:0},'bottom':{bottom:INSET,left:0,right:0},'bottom-left':{bottom:INSET,left:0},'bottom-right':{bottom:INSET,right:0}};var initialAnimationOffset=24;var transitionConfig={'bottom':initialAnimationOffset,'top':-initialAnimationOffset,'top-right':-initialAnimationOffset,'top-left':-initialAnimationOffset,'bottom-left':initialAnimationOffset,'bottom-right':initialAnimationOffset};var ToastContext=createContext({toastInfo:{},setToastInfo:function setToastInfo(){},setToast:function setToast(){},removeToast:function removeToast(){},hideAll:function hideAll(){},isActive:function isActive(){return false;},visibleToasts:{},setVisibleToasts:function setVisibleToasts(){},hideToast:function hideToast(){}});var CustomToast=function CustomToast(_ref){var _overlay=_ref._overlay,_stack=_ref._stack,_presenceTransition=_ref._presenceTransition;var _React$useContext=React.useContext(ToastContext),toastInfo=_React$useContext.toastInfo,visibleToasts=_React$useContext.visibleToasts,removeToast=_React$useContext.removeToast;var bottomInset=useKeyboardBottomInset()*2;var getPositions=function getPositions(){return Object.keys(toastInfo);};var hasToastOnOverlay=false;getPositions().map(function(position){var _toastInfo$position;if(((_toastInfo$position=toastInfo[position])===null||_toastInfo$position===void 0?void 0:_toastInfo$position.length)>0)hasToastOnOverlay=true;});return getPositions().length>0?React.createElement(Overlay,_extends({},_overlay,{isOpen:hasToastOnOverlay,isKeyboardDismissable:false}),getPositions().map(function(position){if(Object.keys(POSITIONS).includes(position))return React.createElement(VStack,_extends({},_stack,{key:position},POSITIONS[position]),toastInfo[position].map(function(toast){var _toast$config3;return React.createElement(PresenceTransition,_extends({},_presenceTransition,{key:toast.id,visible:visibleToasts[toast.id],onTransitionComplete:function onTransitionComplete(status){if(status==='exited'){var _toast$config,_toast$config2;removeToast(toast.id);((_toast$config=toast.config)===null||_toast$config===void 0?void 0:_toast$config.onCloseComplete)&&((_toast$config2=toast.config)===null||_toast$config2===void 0?void 0:_toast$config2.onCloseComplete());}},initial:{opacity:0,translateY:transitionConfig[position]}}),React.createElement(SafeAreaView,null,React.createElement(Box,{bottom:['bottom','bottom-left','bottom-right'].includes(position)&&(_toast$config3=toast.config)!==null&&_toast$config3!==void 0&&_toast$config3.avoidKeyboard?bottomInset+'px':undefined},toast.component)));}));else return null;})):null;};export var ToastProvider=function ToastProvider(_ref2){var children=_ref2.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),toastInfo=_useState2[0],setToastInfo=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),visibleToasts=_useState4[0],setVisibleToasts=_useState4[1];var _useState5=useState(usePropsResolution('Toast',{})),_useState6=_slicedToArray(_useState5,1),themeProps=_useState6[0];var toastIndex=React.useRef(1);var hideAll=React.useCallback(function(){setVisibleToasts({});},[setVisibleToasts]);var hideToast=React.useCallback(function(id){setVisibleToasts(function(prevVisibleToasts){return _objectSpread(_objectSpread({},prevVisibleToasts),{},_defineProperty({},id,false));});},[setVisibleToasts]);var isActive=React.useCallback(function(id){for(var _i=0,_Object$keys=Object.keys(toastInfo);_i<_Object$keys.length;_i++){var toastPosition=_Object$keys[_i];var positionArray=toastInfo[toastPosition];return positionArray.findIndex(function(toastData){return toastData.id===id;})>-1;}return false;},[toastInfo]);var removeToast=React.useCallback(function(id){setToastInfo(function(prev){for(var _i2=0,_Object$keys2=Object.keys(prev);_i2<_Object$keys2.length;_i2++){var toastPosition=_Object$keys2[_i2];var positionArray=prev[toastPosition];var isToastPresent=positionArray.findIndex(function(toastData){return toastData.id===id;})>-1;if(isToastPresent){var newPositionArray=positionArray.filter(function(item){return item.id!==id;});var temp={};temp[toastPosition]=newPositionArray;var newToastInfo=_objectSpread(_objectSpread({},prev),temp);return newToastInfo;}}return prev;});},[setToastInfo]);var setToast=React.useCallback(function(props){var _props$placement=props.placement,placement=_props$placement===void 0?'bottom':_props$placement,title=props.title,render=props.render,_props$id=props.id,id=_props$id===void 0?toastIndex.current++:_props$id,description=props.description,_props$duration=props.duration,duration=_props$duration===void 0?5000:_props$duration,_title=props._title,_description=props._description,accessibilityAnnouncement=props.accessibilityAnnouncement,_props$avoidKeyboard=props.avoidKeyboard,avoidKeyboard=_props$avoidKeyboard===void 0?false:_props$avoidKeyboard,rest=_objectWithoutProperties(props,_excluded);var positionToastArray=toastInfo[placement];if(!positionToastArray)positionToastArray=[];var component=null;if(render){component=render({id:id});}else{component=React.createElement(VStack,_extends({},themeProps,rest),React.createElement(Box,{_text:_objectSpread(_objectSpread({},themeProps._title),_title)},title),description&&React.createElement(Box,{_text:_objectSpread(_objectSpread({},themeProps._description),_description)},description));}toastInfo[placement]=[].concat(_toConsumableArray(positionToastArray),[{component:component,id:id,config:props}]);setToastInfo(_objectSpread({},toastInfo));setVisibleToasts(_objectSpread(_objectSpread({},visibleToasts),{},_defineProperty({},id,true)));if(duration!==null){setTimeout(function(){hideToast(id);},duration);}if(accessibilityAnnouncement&&Platform.OS==='ios'){AccessibilityInfo.announceForAccessibility(accessibilityAnnouncement);}return id;},[themeProps,toastInfo,visibleToasts,hideToast]);var contextValue=React.useMemo(function(){return{toastInfo:toastInfo,setToastInfo:setToastInfo,setToast:setToast,removeToast:removeToast,hideAll:hideAll,isActive:isActive,visibleToasts:visibleToasts,setVisibleToasts:setVisibleToasts,hideToast:hideToast};},[toastInfo,setToastInfo,setToast,removeToast,hideAll,isActive,visibleToasts,setVisibleToasts,hideToast]);return React.createElement(ToastContext.Provider,{value:contextValue},children,React.createElement(CustomToast,{_overlay:themeProps._overlay,_stack:themeProps._stack,_presenceTransition:themeProps._presenceTransition}));};export var useToast=function useToast(){var _React$useContext2=React.useContext(ToastContext),setToast=_React$useContext2.setToast,hideAll=_React$useContext2.hideAll,isActive=_React$useContext2.isActive,hideToast=_React$useContext2.hideToast;var toast=useMemo(function(){return{show:setToast,close:hideToast,closeAll:hideAll,isActive:isActive};},[setToast,hideAll,isActive,hideToast]);return toast;};export var ToastRef=React.createRef();export var Toast={show:function show(props){var _ToastRef$current;return(_ToastRef$current=ToastRef.current)===null||_ToastRef$current===void 0?void 0:_ToastRef$current.show(props);},close:function close(id){var _ToastRef$current2;return(_ToastRef$current2=ToastRef.current)===null||_ToastRef$current2===void 0?void 0:_ToastRef$current2.close(id);},closeAll:function closeAll(){var _ToastRef$current3;return(_ToastRef$current3=ToastRef.current)===null||_ToastRef$current3===void 0?void 0:_ToastRef$current3.closeAll();},isActive:function isActive(id){var _ToastRef$current4;return(_ToastRef$current4=ToastRef.current)===null||_ToastRef$current4===void 0?void 0:_ToastRef$current4.isActive(id);}};","map":{"version":3,"sources":["Toast.tsx"],"names":["Overlay","PresenceTransition","VStack","React","createContext","useState","useMemo","Box","usePropsResolution","useKeyboardBottomInset","INSET","POSITIONS","top","left","right","bottom","initialAnimationOffset","transitionConfig","ToastContext","toastInfo","setToastInfo","setToast","removeToast","hideAll","isActive","visibleToasts","setVisibleToasts","hideToast","CustomToast","_overlay","_stack","_presenceTransition","useContext","bottomInset","getPositions","Object","keys","hasToastOnOverlay","map","position","length","includes","toast","id","status","config","onCloseComplete","opacity","translateY","avoidKeyboard","undefined","component","ToastProvider","children","themeProps","toastIndex","useRef","useCallback","prevVisibleToasts","toastPosition","positionArray","findIndex","toastData","prev","isToastPresent","newPositionArray","filter","item","temp","newToastInfo","props","placement","title","render","current","description","duration","_title","_description","accessibilityAnnouncement","rest","positionToastArray","setTimeout","Platform","OS","AccessibilityInfo","announceForAccessibility","contextValue","useToast","show","close","closeAll","ToastRef","createRef","Toast"],"mappings":"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","sourcesContent":["import { Overlay } from '../../primitives/Overlay';\nimport { PresenceTransition } from '../Transitions';\nimport VStack from '../../primitives/Stack/VStack';\nimport React, {\n  createContext,\n  MutableRefObject,\n  useState,\n  useMemo,\n} from 'react';\nimport { AccessibilityInfo, Platform, SafeAreaView } from 'react-native';\nimport Box from '../../primitives/Box';\nimport { usePropsResolution } from '../../../hooks';\nimport type { IToastContext, IToastInfo, IToast, IToastProps } from './types';\nimport { useKeyboardBottomInset } from '../../../utils';\n\nconst INSET = 50;\n\nconst POSITIONS = {\n  'top': {\n    top: INSET,\n    left: 0,\n    right: 0,\n  },\n  'top-right': {\n    top: INSET,\n    right: 0,\n  },\n  'top-left': {\n    top: INSET,\n    left: 0,\n  },\n  'bottom': {\n    bottom: INSET,\n    left: 0,\n    right: 0,\n  },\n  'bottom-left': {\n    bottom: INSET,\n    left: 0,\n  },\n  'bottom-right': {\n    bottom: INSET,\n    right: 0,\n  },\n};\n\nconst initialAnimationOffset = 24;\n\nconst transitionConfig: any = {\n  'bottom': initialAnimationOffset,\n  'top': -initialAnimationOffset,\n  'top-right': -initialAnimationOffset,\n  'top-left': -initialAnimationOffset,\n  'bottom-left': initialAnimationOffset,\n  'bottom-right': initialAnimationOffset,\n};\n\nconst ToastContext = createContext<IToastContext>({\n  toastInfo: {},\n  setToastInfo: () => {},\n  setToast: () => {},\n  removeToast: () => {},\n  hideAll: () => {},\n  isActive: () => false,\n  visibleToasts: {},\n  setVisibleToasts: () => {},\n  hideToast: () => {},\n});\n\nconst CustomToast = ({ _overlay, _stack, _presenceTransition }: any) => {\n  const { toastInfo, visibleToasts, removeToast } = React.useContext(\n    ToastContext\n  );\n\n  const bottomInset = useKeyboardBottomInset() * 2;\n  const getPositions = () => {\n    return Object.keys(toastInfo);\n  };\n\n  let hasToastOnOverlay = false;\n  getPositions().map((position) => {\n    if (toastInfo[position]?.length > 0) hasToastOnOverlay = true;\n  });\n\n  return getPositions().length > 0 ? (\n    <Overlay\n      {..._overlay}\n      isOpen={hasToastOnOverlay}\n      isKeyboardDismissable={false}\n    >\n      {getPositions().map((position: string) => {\n        if (Object.keys(POSITIONS).includes(position))\n          return (\n            <VStack\n              {..._stack}\n              key={position}\n              // @ts-ignore\n              {...POSITIONS[position]}\n            >\n              {\n                // @ts-ignore\n                toastInfo[position].map((toast: IToast) => (\n                  <PresenceTransition\n                    {..._presenceTransition}\n                    key={toast.id}\n                    visible={visibleToasts[toast.id]}\n                    onTransitionComplete={(status: any) => {\n                      if (status === 'exited') {\n                        removeToast(toast.id);\n                        toast.config?.onCloseComplete &&\n                          toast.config?.onCloseComplete();\n                      }\n                    }}\n                    initial={{\n                      opacity: 0,\n                      translateY: transitionConfig[position],\n                    }}\n                  >\n                    <SafeAreaView>\n                      <Box\n                        bottom={\n                          ['bottom', 'bottom-left', 'bottom-right'].includes(\n                            position\n                          ) && toast.config?.avoidKeyboard\n                            ? bottomInset + 'px'\n                            : undefined\n                        }\n                      >\n                        {toast.component}\n                      </Box>\n                    </SafeAreaView>\n                  </PresenceTransition>\n                ))\n              }\n            </VStack>\n          );\n        else return null;\n      })}\n    </Overlay>\n  ) : null;\n};\n\nexport const ToastProvider = ({ children }: { children: any }) => {\n  const [toastInfo, setToastInfo] = useState<IToastInfo>({});\n  const [visibleToasts, setVisibleToasts] = useState<\n    {\n      [key in string]: boolean;\n    }\n  >({});\n\n  const [themeProps] = useState(usePropsResolution('Toast', {}));\n  const toastIndex = React.useRef(1);\n\n  const hideAll = React.useCallback(() => {\n    setVisibleToasts({});\n  }, [setVisibleToasts]);\n\n  const hideToast = React.useCallback(\n    (id: any) => {\n      setVisibleToasts((prevVisibleToasts) => ({\n        ...prevVisibleToasts,\n        [id]: false,\n      }));\n    },\n    [setVisibleToasts]\n  );\n\n  const isActive = React.useCallback(\n    (id: any) => {\n      for (const toastPosition of Object.keys(toastInfo)) {\n        const positionArray: Array<IToast> = toastInfo[toastPosition];\n        return positionArray.findIndex((toastData) => toastData.id === id) > -1;\n      }\n\n      return false;\n    },\n    [toastInfo]\n  );\n\n  const removeToast = React.useCallback(\n    (id: any) => {\n      setToastInfo((prev) => {\n        for (const toastPosition of Object.keys(prev)) {\n          const positionArray: Array<IToast> = prev[toastPosition];\n          const isToastPresent =\n            positionArray.findIndex((toastData) => toastData.id === id) > -1;\n\n          if (isToastPresent) {\n            const newPositionArray = positionArray.filter(\n              (item) => item.id !== id\n            );\n            const temp: any = {};\n            temp[toastPosition] = newPositionArray;\n\n            const newToastInfo = { ...prev, ...temp };\n            return newToastInfo;\n          }\n        }\n\n        return prev;\n      });\n    },\n    [setToastInfo]\n  );\n\n  const setToast = React.useCallback(\n    (props: IToastProps): number => {\n      const {\n        placement = 'bottom',\n        title,\n        render,\n        id = toastIndex.current++,\n        description,\n        duration = 5000,\n        _title,\n        _description,\n        accessibilityAnnouncement,\n        // @ts-ignore\n        avoidKeyboard = false, //eslint-disable-line\n        ...rest\n      } = props;\n\n      let positionToastArray = toastInfo[placement];\n      if (!positionToastArray) positionToastArray = [];\n\n      let component = null;\n\n      if (render) {\n        component = render({ id });\n      } else {\n        component = (\n          // Below VStack is the default component where all the direct props spread.\n          <VStack {...themeProps} {...rest}>\n            <Box _text={{ ...themeProps._title, ..._title }}>{title}</Box>\n            {description && (\n              <Box _text={{ ...themeProps._description, ..._description }}>\n                {description}\n              </Box>\n            )}\n          </VStack>\n        );\n      }\n\n      toastInfo[placement] = [\n        ...positionToastArray,\n        { component, id, config: props },\n      ];\n\n      setToastInfo({ ...toastInfo });\n\n      setVisibleToasts({ ...visibleToasts, [id]: true });\n      if (duration !== null) {\n        setTimeout(function () {\n          hideToast(id);\n        }, duration);\n      }\n\n      // iOS doesn't support accessibilityLiveRegion\n      if (accessibilityAnnouncement && Platform.OS === 'ios') {\n        AccessibilityInfo.announceForAccessibility(accessibilityAnnouncement);\n      }\n\n      return id;\n    },\n    [themeProps, toastInfo, visibleToasts, hideToast]\n  );\n\n  const contextValue = React.useMemo(() => {\n    return {\n      toastInfo,\n      setToastInfo,\n      setToast,\n      removeToast,\n      hideAll,\n      isActive,\n      visibleToasts,\n      setVisibleToasts,\n      hideToast,\n    };\n  }, [\n    toastInfo,\n    setToastInfo,\n    setToast,\n    removeToast,\n    hideAll,\n    isActive,\n    visibleToasts,\n    setVisibleToasts,\n    hideToast,\n  ]);\n\n  return (\n    <ToastContext.Provider value={contextValue}>\n      {children}\n      <CustomToast\n        _overlay={themeProps._overlay}\n        _stack={themeProps._stack}\n        _presenceTransition={themeProps._presenceTransition}\n      />\n    </ToastContext.Provider>\n  );\n};\n\nexport const useToast = () => {\n  const { setToast, hideAll, isActive, hideToast } = React.useContext(\n    ToastContext\n  );\n\n  const toast = useMemo(\n    () => ({\n      show: setToast,\n      close: hideToast,\n      closeAll: hideAll,\n      isActive,\n    }),\n    [setToast, hideAll, isActive, hideToast]\n  );\n\n  return toast;\n};\n\nexport type IToastService = ReturnType<typeof useToast>;\n\nexport const ToastRef = React.createRef<IToastService>() as MutableRefObject<IToastService>;\n\nexport const Toast: IToastService = {\n  show: (props: IToastProps) => ToastRef.current?.show(props),\n  close: (id: any) => ToastRef.current?.close(id),\n  closeAll: () => ToastRef.current?.closeAll(),\n  isActive: (id: any) => ToastRef.current?.isActive(id),\n};\n"]},"metadata":{},"sourceType":"module"}