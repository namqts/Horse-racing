{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"onSelectedItemChange\",\"options\",\"renderItem\",\"getOptionLabel\",\"getOptionKey\",\"onChange\",\"numberOfItems\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React from'react';import{useButton}from'@react-native-aria/button';import{useComboBoxState}from'@react-stately/combobox';import{useComboBox}from'@react-native-aria/combobox';import{useListBox,useOption}from'@react-native-aria/listbox';import ScrollView from\"react-native-web/dist/exports/ScrollView\";import findNodeHandle from\"react-native-web/dist/exports/findNodeHandle\";import Platform from\"react-native-web/dist/exports/Platform\";import{Item}from'@react-stately/collections';import Box from\"../../primitives/Box\";import{Pressable}from\"../../primitives/Pressable\";import Text from\"../../primitives/Text\";import{extractInObject}from\"../../../theme/tools\";import{layoutPropsList}from\"./types\";import{Input}from\"../../primitives/Input\";import{useThemeProps}from\"../../../hooks\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";export var Typeahead=React.forwardRef(function(_ref,ref){var onSelectedItemChange=_ref.onSelectedItemChange,options=_ref.options,renderItem=_ref.renderItem,getOptionLabel=_ref.getOptionLabel,getOptionKey=_ref.getOptionKey,onChange=_ref.onChange,numberOfItems=_ref.numberOfItems,rest=_objectWithoutProperties(_ref,_excluded);if(useHasResponsiveProps(rest)){return null;}return React.createElement(ComboBoxImplementation,_extends({},rest,{onSelectionChange:onSelectedItemChange,items:numberOfItems!==undefined?options.slice(0,numberOfItems):options,onInputChange:onChange,ref:ref}),function(item){if(typeof item!=='string'&&getOptionLabel===undefined){throw new Error('Please use getOptionLabel prop');}if(item.id===undefined&&getOptionKey===undefined){throw new Error('Please use getOptionKey prop');}var optionLabel=getOptionLabel?getOptionLabel(item):item;var optionKey=getOptionKey?getOptionKey(item):item.id!==undefined?item.id:optionLabel;return React.createElement(Item,{textValue:optionLabel,key:optionKey},renderItem?renderItem(item):React.createElement(Box,{p:2,justifyContent:\"center\"},React.createElement(Text,null,optionLabel)));});});var ComboBoxImplementation=React.forwardRef(function(props,ref){var _extractInObject=extractInObject(props,layoutPropsList),_extractInObject2=_slicedToArray(_extractInObject,1),layoutProps=_extractInObject2[0];var state=useComboBoxState(props);var triggerRef=React.useRef(null);var inputRef=React.useRef(null);var listBoxRef=React.useRef(null);var popoverRef=React.useRef(null);var _useComboBox=useComboBox(_objectSpread(_objectSpread({},props),{},{inputRef:inputRef,buttonRef:triggerRef,listBoxRef:listBoxRef,popoverRef:popoverRef,menuTrigger:'input'}),state),triggerProps=_useComboBox.buttonProps,inputProps=_useComboBox.inputProps,listBoxProps=_useComboBox.listBoxProps,labelProps=_useComboBox.labelProps;var toggleIconSetter=function toggleIconSetter(){if(typeof props.toggleIcon==='function')return props.toggleIcon({isOpen:state.isOpen});return props.toggleIcon;};var _useButton=useButton(triggerProps),buttonProps=_useButton.buttonProps;return React.createElement(Box,_extends({flexDirection:\"row\"},layoutProps,{ref:ref}),React.createElement(Box,{flex:1},props.label&&React.createElement(Text,_extends({},labelProps,{pb:1}),props.label),React.createElement(Input,_extends({},inputProps,{ref:inputRef,InputRightElement:React.createElement(Pressable,_extends({},buttonProps,{ref:triggerRef}),toggleIconSetter())})),state.isOpen&&React.createElement(ListBoxPopup,_extends({},listBoxProps,{listBoxRef:listBoxRef,popoverRef:popoverRef,state:state,label:props.label}))));});function ListBoxPopup(props){var popoverRef=props.popoverRef,listBoxRef=props.listBoxRef,state=props.state,dropdownHeight=props.dropdownHeight,label=props.label;var _useListBox=useListBox({label:label,autoFocus:state.focusStrategy,disallowEmptySelection:true},state,listBoxRef),listBoxProps=_useListBox.listBoxProps;return React.createElement(Box,{ref:popoverRef},React.createElement(Box,{position:\"absolute\",width:\"100%\",maxHeight:dropdownHeight!==null&&dropdownHeight!==void 0?dropdownHeight:200},React.createElement(ScrollView,_extends({},listBoxProps,{keyboardShouldPersistTaps:\"handled\",ref:function ref(node){if(Platform.OS==='web'){listBoxRef.current=findNodeHandle(node);}else{listBoxRef.current=node;}}}),_toConsumableArray(state.collection).map(function(item){return React.createElement(Option,{key:item.key,item:item,state:state});}))));}function Option(_ref2){var item=_ref2.item,state=_ref2.state;var searchItemStyle=useThemeProps('TypeAheadSearchItem',{});var ref=React.useRef(null);var isDisabled=state.disabledKeys.has(item.key);var isSelected=state.selectionManager.isSelected(item.key);var isFocused=state.selectionManager.focusedKey===item.key;var _useOption=useOption({key:item.key,isDisabled:isDisabled,isSelected:isSelected,shouldFocusOnHover:true,shouldUseVirtualFocus:true},state,ref),optionProps=_useOption.optionProps;var backgroundColor=searchItemStyle.backgroundColor;var opacity=1;if(isSelected){backgroundColor=searchItemStyle._focus.backgroundColor;}else if(isFocused){backgroundColor=searchItemStyle._focus.backgroundColor;}else if(isDisabled){opacity=0.6;backgroundColor=searchItemStyle._disabled.backgroundColor;}return React.createElement(Pressable,_extends({},optionProps,{opacity:opacity,cursor:isDisabled?Platform.OS==='web'?'not-allowed':null:null,backgroundColor:backgroundColor,ref:ref}),item.rendered);}","map":{"version":3,"sources":["Typeahead.tsx"],"names":["React","useButton","useComboBoxState","useComboBox","useListBox","useOption","Item","Box","Pressable","Text","extractInObject","layoutPropsList","Input","useThemeProps","useHasResponsiveProps","Typeahead","forwardRef","onSelectedItemChange","options","renderItem","getOptionLabel","getOptionKey","onChange","numberOfItems","rest","ref","undefined","slice","item","Error","id","optionLabel","optionKey","ComboBoxImplementation","props","layoutProps","state","triggerRef","useRef","inputRef","listBoxRef","popoverRef","buttonProps","triggerProps","inputProps","listBoxProps","labelProps","buttonRef","menuTrigger","toggleIconSetter","toggleIcon","isOpen","label","ListBoxPopup","dropdownHeight","autoFocus","focusStrategy","disallowEmptySelection","node","Platform","OS","current","findNodeHandle","collection","map","key","Option","searchItemStyle","isDisabled","disabledKeys","has","isSelected","selectionManager","isFocused","focusedKey","optionProps","shouldFocusOnHover","shouldUseVirtualFocus","backgroundColor","opacity","_focus","_disabled","rendered"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useButton } from '@react-native-aria/button';\nimport { ComboBoxState, useComboBoxState } from '@react-stately/combobox';\nimport { useComboBox } from '@react-native-aria/combobox';\nimport { useListBox, useOption } from '@react-native-aria/listbox';\nimport { ScrollView, findNodeHandle, Platform } from 'react-native';\nimport { Item } from '@react-stately/collections';\nimport Box from '../../primitives/Box';\nimport { Pressable } from '../../primitives/Pressable';\nimport Text from '../../primitives/Text';\nimport { extractInObject } from '../../../theme/tools';\nimport { ITypeaheadProps, IComboBoxProps, layoutPropsList } from './types';\nimport { Input } from '../../primitives/Input';\nimport { useThemeProps } from '../../../hooks';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nexport const Typeahead = React.forwardRef(\n  (\n    {\n      onSelectedItemChange,\n      options,\n      renderItem,\n      getOptionLabel,\n      getOptionKey,\n      onChange,\n      numberOfItems,\n      ...rest\n    }: ITypeaheadProps,\n    ref?: any\n  ) => {\n    //TODO: refactor for responsive prop\n    if (useHasResponsiveProps(rest)) {\n      return null;\n    }\n    return (\n      <ComboBoxImplementation\n        {...rest}\n        onSelectionChange={onSelectedItemChange}\n        items={\n          numberOfItems !== undefined\n            ? options.slice(0, numberOfItems)\n            : options\n        }\n        onInputChange={onChange}\n        ref={ref}\n      >\n        {(item: any) => {\n          if (typeof item !== 'string' && getOptionLabel === undefined) {\n            throw new Error('Please use getOptionLabel prop');\n          }\n\n          if (item.id === undefined && getOptionKey === undefined) {\n            throw new Error('Please use getOptionKey prop');\n          }\n\n          const optionLabel = getOptionLabel ? getOptionLabel(item) : item;\n          const optionKey = getOptionKey\n            ? getOptionKey(item)\n            : item.id !== undefined\n            ? item.id\n            : optionLabel;\n\n          return (\n            <Item textValue={optionLabel} key={optionKey}>\n              {renderItem ? (\n                renderItem(item)\n              ) : (\n                <Box p={2} justifyContent=\"center\">\n                  <Text>{optionLabel}</Text>\n                </Box>\n              )}\n            </Item>\n          );\n        }}\n      </ComboBoxImplementation>\n    );\n  }\n);\n\nconst ComboBoxImplementation = React.forwardRef(\n  (props: IComboBoxProps, ref?: any) => {\n    const [layoutProps] = extractInObject(props, layoutPropsList);\n    let state = useComboBoxState(props);\n\n    let triggerRef = React.useRef(null);\n    let inputRef = React.useRef(null);\n    let listBoxRef = React.useRef(null);\n    let popoverRef = React.useRef(null);\n\n    let {\n      buttonProps: triggerProps,\n      inputProps,\n      listBoxProps,\n      labelProps,\n    } = useComboBox(\n      {\n        ...props,\n        inputRef,\n        buttonRef: triggerRef,\n        listBoxRef,\n        popoverRef,\n        menuTrigger: 'input',\n      },\n      state\n    );\n\n    const toggleIconSetter = () => {\n      if (typeof props.toggleIcon === 'function')\n        return props.toggleIcon({\n          isOpen: state.isOpen,\n        });\n      return props.toggleIcon;\n    };\n\n    let { buttonProps } = useButton(triggerProps);\n\n    return (\n      <Box flexDirection=\"row\" {...layoutProps} ref={ref}>\n        <Box flex={1}>\n          {props.label && (\n            <Text {...labelProps} pb={1}>\n              {props.label}\n            </Text>\n          )}\n          <Input\n            {...inputProps}\n            ref={inputRef}\n            InputRightElement={\n              // @ts-ignore - RN has hitSlop type inconsistent for View and Pressable!\n              <Pressable {...buttonProps} ref={triggerRef}>\n                {toggleIconSetter()}\n              </Pressable>\n            }\n          />\n\n          {state.isOpen && (\n            <ListBoxPopup\n              {...listBoxProps}\n              listBoxRef={listBoxRef}\n              popoverRef={popoverRef}\n              state={state}\n              label={props.label}\n            />\n          )}\n        </Box>\n      </Box>\n    );\n  }\n);\n\ntype IListBoxProps = {\n  popoverRef: any;\n  listBoxRef: any;\n  state: ComboBoxState<any>;\n  dropdownHeight: number;\n  label: string;\n};\n\nfunction ListBoxPopup(props: IListBoxProps) {\n  let { popoverRef, listBoxRef, state, dropdownHeight, label } = props;\n\n  let { listBoxProps } = useListBox(\n    {\n      label,\n      autoFocus: state.focusStrategy,\n      disallowEmptySelection: true,\n    },\n    state,\n    listBoxRef\n  );\n\n  return (\n    <Box ref={popoverRef}>\n      <Box position=\"absolute\" width=\"100%\" maxHeight={dropdownHeight ?? 200}>\n        <ScrollView\n          {...listBoxProps}\n          keyboardShouldPersistTaps=\"handled\"\n          ref={(node) => {\n            if (Platform.OS === 'web') {\n              listBoxRef.current = findNodeHandle(node);\n            } else {\n              listBoxRef.current = node;\n            }\n          }}\n        >\n          {[...state.collection].map((item) => (\n            <Option key={item.key} item={item} state={state} />\n          ))}\n        </ScrollView>\n      </Box>\n    </Box>\n  );\n}\n\nfunction Option({ item, state }: { item: any; state: ComboBoxState<any> }) {\n  const searchItemStyle = useThemeProps('TypeAheadSearchItem', {});\n\n  let ref = React.useRef(null);\n  let isDisabled = state.disabledKeys.has(item.key);\n  let isSelected = state.selectionManager.isSelected(item.key);\n  let isFocused = state.selectionManager.focusedKey === item.key;\n\n  let { optionProps } = useOption(\n    {\n      key: item.key,\n      isDisabled,\n      isSelected,\n      shouldFocusOnHover: true,\n      shouldUseVirtualFocus: true,\n    },\n    state,\n    ref\n  );\n\n  let backgroundColor = searchItemStyle.backgroundColor;\n  let opacity = 1;\n\n  if (isSelected) {\n    backgroundColor = searchItemStyle._focus.backgroundColor;\n  } else if (isFocused) {\n    backgroundColor = searchItemStyle._focus.backgroundColor;\n  } else if (isDisabled) {\n    opacity = 0.6;\n    backgroundColor = searchItemStyle._disabled.backgroundColor;\n  }\n\n  return (\n    <Pressable\n      {...optionProps}\n      opacity={opacity}\n      cursor={\n        isDisabled ? (Platform.OS === 'web' ? 'not-allowed' : null) : null\n      }\n      backgroundColor={backgroundColor}\n      ref={ref}\n    >\n      {item.rendered}\n    </Pressable>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}