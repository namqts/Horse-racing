{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\"],_excluded2=[\"isTruncated\",\"noOfLines\",\"bold\",\"italic\",\"sub\",\"highlight\",\"underline\",\"strikeThrough\",\"fontFamily\",\"fontWeight\",\"fontStyle\",\"_hover\",\"fontSize\",\"numberOfLines\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{memo,forwardRef,useRef}from'react';import{usePropsResolution}from\"../../../hooks/useThemeProps\";import{useHover}from'@react-native-aria/interactions';import{mergeRefs}from\"../../../utils/mergeRefs\";import{makeStyledComponent}from\"../../../utils/styled\";import{useResolvedFontFamily}from\"../../../hooks/useResolvedFontFamily\";import NativeText from\"react-native-web/dist/exports/Text\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";var StyledText=makeStyledComponent(NativeText);var TextAncestorContext=React.createContext(false);var Text=function Text(_ref2,ref){var children=_ref2.children,props=_objectWithoutProperties(_ref2,_excluded);var hasTextAncestor=React.useContext(TextAncestorContext);var _usePropsResolution=usePropsResolution('Text',props,{},{resolveResponsively:['noOfLines','numberOfLines'],componentTheme:hasTextAncestor?{}:undefined}),isTruncated=_usePropsResolution.isTruncated,noOfLines=_usePropsResolution.noOfLines,bold=_usePropsResolution.bold,italic=_usePropsResolution.italic,sub=_usePropsResolution.sub,highlight=_usePropsResolution.highlight,underline=_usePropsResolution.underline,strikeThrough=_usePropsResolution.strikeThrough,propFontFamily=_usePropsResolution.fontFamily,propFontWeight=_usePropsResolution.fontWeight,propFontStyle=_usePropsResolution.fontStyle,_hover=_usePropsResolution._hover,fontSize=_usePropsResolution.fontSize,numberOfLines=_usePropsResolution.numberOfLines,resolvedProps=_objectWithoutProperties(_usePropsResolution,_excluded2);var _ref=useRef(null);var _useHover=useHover({},_hover?_ref:null),isHovered=_useHover.isHovered;var fontFamily=propFontFamily;var fontStyle=italic?'italic':propFontStyle;var fontWeight=bold?'bold':propFontWeight;var resolvedFontFamily=useResolvedFontFamily({fontFamily:fontFamily,fontWeight:fontWeight!==null&&fontWeight!==void 0?fontWeight:hasTextAncestor?undefined:400,fontStyle:fontStyle!==null&&fontStyle!==void 0?fontStyle:hasTextAncestor?undefined:'normal'});if(resolvedFontFamily){fontFamily=resolvedFontFamily;}if(useHasResponsiveProps(props)){return null;}var propsToSpread=_objectSpread(_objectSpread(_objectSpread({},resolvedProps),{},{numberOfLines:numberOfLines||noOfLines?numberOfLines||noOfLines:isTruncated?1:undefined},resolvedFontFamily),{},{bg:highlight?'warning.300':resolvedProps.bg,textDecorationLine:underline&&strikeThrough?'underline line-through':underline?'underline':strikeThrough?'line-through':resolvedProps.textDecorationLine,fontSize:sub?10:fontSize,ref:mergeRefs([ref,_ref])},isHovered&&_hover);return hasTextAncestor?React.createElement(StyledText,propsToSpread,children):React.createElement(TextAncestorContext.Provider,{value:true},React.createElement(StyledText,propsToSpread,children));};export default memo(forwardRef(Text));","map":{"version":3,"sources":["index.tsx"],"names":["React","memo","forwardRef","useRef","usePropsResolution","useHover","mergeRefs","makeStyledComponent","useResolvedFontFamily","useHasResponsiveProps","StyledText","NativeText","TextAncestorContext","createContext","Text","children","props","ref","hasTextAncestor","useContext","isTruncated","noOfLines","bold","italic","sub","highlight","underline","strikeThrough","fontFamily","propFontFamily","fontWeight","propFontWeight","fontStyle","propFontStyle","_hover","fontSize","numberOfLines","resolvedProps","resolveResponsively","componentTheme","undefined","_ref","isHovered","resolvedFontFamily","propsToSpread","bg","textDecorationLine"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef, useRef } from 'react';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport type { ITextProps } from './types';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils/mergeRefs';\nimport { makeStyledComponent } from '../../../utils/styled';\nimport { useResolvedFontFamily } from '../../../hooks/useResolvedFontFamily';\nimport { Text as NativeText } from 'react-native';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst StyledText = makeStyledComponent(NativeText);\n// To have a RN compatible behaviour, we'll inherit parent text styles as base style\nconst TextAncestorContext = React.createContext(false);\n\nconst Text = ({ children, ...props }: ITextProps, ref: any) => {\n  const hasTextAncestor = React.useContext(TextAncestorContext);\n\n  const {\n    isTruncated,\n    noOfLines,\n    bold,\n    italic,\n    sub,\n    highlight,\n    underline,\n    strikeThrough,\n    fontFamily: propFontFamily,\n    fontWeight: propFontWeight,\n    fontStyle: propFontStyle,\n    _hover,\n    fontSize,\n    numberOfLines,\n    ...resolvedProps\n  } = usePropsResolution(\n    'Text',\n    props,\n    {},\n    {\n      resolveResponsively: ['noOfLines', 'numberOfLines'],\n      // We override the component base theme if text has an ancestor.\n      componentTheme: hasTextAncestor ? {} : undefined,\n    }\n  );\n\n  const _ref = useRef(null);\n  // TODO: might have to add this condition\n  const { isHovered } = useHover({}, _hover ? _ref : null);\n  // const { isHovered } = useHover({}, _ref);\n  let fontFamily = propFontFamily;\n  const fontStyle = italic ? 'italic' : propFontStyle;\n  const fontWeight = bold ? 'bold' : propFontWeight;\n\n  const resolvedFontFamily = useResolvedFontFamily({\n    fontFamily,\n    fontWeight: fontWeight ?? (hasTextAncestor ? undefined : 400),\n    fontStyle: fontStyle ?? (hasTextAncestor ? undefined : 'normal'),\n  });\n\n  if (resolvedFontFamily) {\n    fontFamily = resolvedFontFamily;\n  }\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  const propsToSpread = {\n    ...resolvedProps,\n    numberOfLines:\n      numberOfLines || noOfLines\n        ? numberOfLines || noOfLines\n        : isTruncated\n        ? 1\n        : undefined,\n    ...resolvedFontFamily,\n    bg: highlight ? 'warning.300' : resolvedProps.bg,\n    textDecorationLine:\n      underline && strikeThrough\n        ? 'underline line-through'\n        : underline\n        ? 'underline'\n        : strikeThrough\n        ? 'line-through'\n        : resolvedProps.textDecorationLine,\n    fontSize: sub ? 10 : fontSize,\n    ref: mergeRefs([ref, _ref]),\n    ...(isHovered && _hover),\n  };\n\n  return hasTextAncestor ? (\n    <StyledText {...propsToSpread}>{children}</StyledText>\n  ) : (\n    <TextAncestorContext.Provider value={true}>\n      <StyledText {...propsToSpread}>{children}</StyledText>\n    </TextAncestorContext.Provider>\n  );\n};\n\nexport default memo(forwardRef(Text));\nexport type { ITextProps };\n"]},"metadata":{},"sourceType":"module"}