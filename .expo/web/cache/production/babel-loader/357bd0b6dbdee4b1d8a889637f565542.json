{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{useWalletConnect}from\"@walletconnect/react-native-dapp\";import React from\"react\";import localhost from\"react-native-localhost\";import Web3 from\"web3\";import{DetailsPizza,Login,DetailsDesserts,DetailsDrinks,Live2D,History,RaceDetail}from\"./screens\";import Home from\"./screens/home/Home\";import{createStackNavigator}from\"@react-navigation/stack\";import{NavigationContainer,DefaultTheme}from\"@react-navigation/native\";import SplashScreen from\"react-native-splash-screen\";import{GestureHandlerRootView}from\"react-native-gesture-handler\";var Stack=createStackNavigator();import PizzaShop from\"../artifacts/contracts/PizzaShop.sol/PizzaShop.json\";import{COLORS}from\"../constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var shouldDeployContract=function shouldDeployContract(web3,abi,data,from){var deployment,gas,_await$deployment$sen,contractAddress;return _regeneratorRuntime.async(function shouldDeployContract$(_context){while(1){switch(_context.prev=_context.next){case 0:deployment=new web3.eth.Contract(abi).deploy({data:data});_context.next=3;return _regeneratorRuntime.awrap(deployment.estimateGas());case 3:gas=_context.sent;_context.next=6;return _regeneratorRuntime.awrap(deployment.send({from:from,gas:gas}));case 6:_await$deployment$sen=_context.sent;contractAddress=_await$deployment$sen.options.address;return _context.abrupt(\"return\",new web3.eth.Contract(abi,contractAddress));case 9:case\"end\":return _context.stop();}}},null,null,null,Promise);};export default function App(){React.useEffect(function(){SplashScreen.hide();});var connector=useWalletConnect();var _React$useState=React.useState(\"Loading...\"),_React$useState2=_slicedToArray(_React$useState,2),message=_React$useState2[0],setMessage=_React$useState2[1];var web3=React.useMemo(function(){return new Web3(new Web3.providers.HttpProvider(\"http://\"+localhost+\":\"+undefined));},[undefined]);React.useEffect(function(){void function _callee(){var _await$web3$eth$accou,address,contract;return _regeneratorRuntime.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(web3.eth.accounts.privateKeyToAccount(undefined));case 2:_await$web3$eth$accou=_context2.sent;address=_await$web3$eth$accou.address;_context2.next=6;return _regeneratorRuntime.awrap(shouldDeployContract(web3,PizzaShop.abi,PizzaShop.bytecode,address));case 6:contract=_context2.sent;case 7:case\"end\":return _context2.stop();}}},null,null,null,Promise);}();},[web3,shouldDeployContract,setMessage,undefined]);var connectWallet=React.useCallback(function(){return connector.connect();},[connector]);var signTransaction=React.useCallback(function _callee2(){return _regeneratorRuntime.async(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _regeneratorRuntime.awrap(connector.signTransaction({data:\"0x\",from:\"0xbc28Ea04101F03aA7a94C1379bc3AB32E65e62d3\",gas:\"0x9c40\",gasPrice:\"0x02540be400\",nonce:\"0x0114\",to:\"0x89D24A7b4cCB1b6fAA2625Fe562bDd9A23260359\",value:\"0x00\"}));case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 8:case\"end\":return _context3.stop();}}},null,null,[[0,5]],Promise);},[connector]);var killSession=React.useCallback(function(){return connector.killSession();},[connector]);var MyTheme=_objectSpread(_objectSpread({},DefaultTheme),{},{colors:_objectSpread(_objectSpread({},DefaultTheme.colors),{},{card:\"rgb(53, 60, 62)\",background:COLORS.transparentBlur})});return _jsx(GestureHandlerRootView,{style:{flex:1},children:_jsx(NavigationContainer,{theme:MyTheme,children:_jsxs(Stack.Navigator,{screenOptions:{headerShown:false},initialRouteName:\"Login\",children:[_jsx(Stack.Screen,{name:\"Login\",component:Login}),_jsx(Stack.Screen,{name:\"Home\",component:Home,options:{headerTitle:function headerTitle(props){return _jsx(Header,{});}}}),_jsx(Stack.Screen,{name:\"Live2D\",component:Live2D}),_jsx(Stack.Screen,{name:\"History\",component:History}),_jsx(Stack.Screen,{name:\"RaceDetail\",component:RaceDetail}),_jsx(Stack.Screen,{name:\"DetailsPizza\",component:DetailsPizza}),_jsx(Stack.Screen,{name:\"DetailsDesserts\",component:DetailsDesserts}),_jsx(Stack.Screen,{name:\"DetailsDrinks\",component:DetailsDrinks})]})})});}","map":{"version":3,"names":["useWalletConnect","React","localhost","Web3","DetailsPizza","Login","DetailsDesserts","DetailsDrinks","Live2D","History","RaceDetail","Home","createStackNavigator","NavigationContainer","DefaultTheme","SplashScreen","GestureHandlerRootView","Stack","PizzaShop","COLORS","shouldDeployContract","web3","abi","data","from","deployment","eth","Contract","deploy","estimateGas","gas","send","contractAddress","options","address","App","useEffect","hide","connector","useState","message","setMessage","useMemo","providers","HttpProvider","accounts","privateKeyToAccount","bytecode","contract","connectWallet","useCallback","connect","signTransaction","gasPrice","nonce","to","value","console","error","killSession","MyTheme","colors","card","background","transparentBlur","flex","headerShown","headerTitle","props"],"sources":["D:/Horse-racing/frontend/App.tsx"],"sourcesContent":["import { HARDHAT_PORT, HARDHAT_PRIVATE_KEY } from \"@env\";\r\nimport { useWalletConnect } from \"@walletconnect/react-native-dapp\";\r\nimport React from \"react\";\r\nimport { StyleSheet, Text, TouchableOpacity, View } from \"react-native\";\r\nimport localhost from \"react-native-localhost\";\r\nimport Web3 from \"web3\";\r\nimport {\r\n  DetailsPizza,\r\n  Login,\r\n  DetailsDesserts,\r\n  DetailsDrinks,\r\n  Live2D,\r\n  History,\r\n  RaceDetail,\r\n} from \"./screens\";\r\nimport Home from \"./screens/home/Home\";\r\nimport { createStackNavigator } from \"@react-navigation/stack\";\r\nimport {\r\n  NavigationContainer,\r\n  getFocusedRouteNameFromRoute,\r\n  DefaultTheme,\r\n} from \"@react-navigation/native\";\r\nimport SplashScreen from \"react-native-splash-screen\";\r\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\r\n\r\nimport Tabs from \"../navigation/tabs.js\";\r\n\r\nconst Stack = createStackNavigator();\r\nimport PizzaShop from \"../artifacts/contracts/PizzaShop.sol/PizzaShop.json\";\r\nimport { COLORS } from \"../constants\";\r\n\r\nconst shouldDeployContract = async (web3, abi, data, from: string) => {\r\n  const deployment = new web3.eth.Contract(abi).deploy({ data });\r\n  const gas = await deployment.estimateGas();\r\n  const {\r\n    options: { address: contractAddress },\r\n  } = await deployment.send({ from, gas });\r\n  return new web3.eth.Contract(abi, contractAddress);\r\n};\r\n\r\nexport default function App(): JSX.Element {\r\n  React.useEffect(() => {\r\n    SplashScreen.hide();\r\n  });\r\n\r\n  const connector = useWalletConnect();\r\n  const [message, setMessage] = React.useState<string>(\"Loading...\");\r\n  const web3 = React.useMemo(\r\n    () =>\r\n      new Web3(\r\n        new Web3.providers.HttpProvider(`http://${localhost}:${HARDHAT_PORT}`)\r\n      ),\r\n    [HARDHAT_PORT]\r\n  );\r\n  React.useEffect(() => {\r\n    void (async () => {\r\n      const { address } = await web3.eth.accounts.privateKeyToAccount(\r\n        HARDHAT_PRIVATE_KEY\r\n      );\r\n      const contract = await shouldDeployContract(\r\n        web3,\r\n        PizzaShop.abi,\r\n        PizzaShop.bytecode,\r\n        address\r\n      );\r\n    })();\r\n  }, [web3, shouldDeployContract, setMessage, HARDHAT_PRIVATE_KEY]);\r\n  const connectWallet = React.useCallback(() => {\r\n    return connector.connect();\r\n  }, [connector]);\r\n  const signTransaction = React.useCallback(async () => {\r\n    try {\r\n      await connector.signTransaction({\r\n        data: \"0x\",\r\n        from: \"0xbc28Ea04101F03aA7a94C1379bc3AB32E65e62d3\",\r\n        gas: \"0x9c40\",\r\n        gasPrice: \"0x02540be400\",\r\n        nonce: \"0x0114\",\r\n        to: \"0x89D24A7b4cCB1b6fAA2625Fe562bDd9A23260359\",\r\n        value: \"0x00\",\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }, [connector]);\r\n  const killSession = React.useCallback(() => {\r\n    return connector.killSession();\r\n  }, [connector]);\r\n\r\n  const MyTheme = {\r\n    ...DefaultTheme,\r\n    colors: {\r\n      ...DefaultTheme.colors,\r\n      card: \"rgb(53, 60, 62)\",\r\n      background: COLORS.transparentBlur,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <GestureHandlerRootView style={{ flex: 1 }}>\r\n      <NavigationContainer theme={MyTheme}>\r\n        <Stack.Navigator\r\n          screenOptions={{\r\n            headerShown: false,\r\n          }}\r\n          initialRouteName={\"Login\"}\r\n        >\r\n          <Stack.Screen name=\"Login\" component={Login} />\r\n          <Stack.Screen\r\n            name=\"Home\"\r\n            component={Home}\r\n            options={{\r\n              headerTitle: (props) => <Header />\r\n            }}\r\n          />\r\n          {/* <Stack.Screen name=\"Order\" component={Tabs} />\r\n          <Stack.Screen name=\"Wallet\" component={Tabs} /> */}\r\n          <Stack.Screen name=\"Live2D\" component={Live2D} />\r\n          <Stack.Screen name=\"History\" component={History} />\r\n          <Stack.Screen name=\"RaceDetail\" component={RaceDetail} />\r\n\r\n          <Stack.Screen name=\"DetailsPizza\" component={DetailsPizza} />\r\n          <Stack.Screen name=\"DetailsDesserts\" component={DetailsDesserts} />\r\n          <Stack.Screen name=\"DetailsDrinks\" component={DetailsDrinks} />\r\n        </Stack.Navigator>\r\n      </NavigationContainer>\r\n    </GestureHandlerRootView>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}